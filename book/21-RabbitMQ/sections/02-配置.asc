=== RabbitMQ 配置

官方文档::
* https://www.rabbitmq.com/install-rpm.html#cloudsmith


rabbitmqctl add_user 'username' '2a55f70a841f18b97c3a7db939b7adc9e34a0f1b'

rabbitmqctl list_users  

添加虚拟主机qa1
rabbitmqctl add_vhost qa1

#Granting Permissions to a User
# First ".*" for configure permission on every entity
# Second ".*" for write permission on every entity
# Third ".*" for read permission on every entity
rabbitmqctl set_permissions -p "custom-vhost" "username" ".*" ".*" ".*"

#设置最大文件句柄
the max number of open files,
#查看
ulimit -n
#设置
echo "*               soft   nofile            65535" >> /etc/security/limits.conf
echo "*               hard   nofile            65535" >> /etc/security/limits.conf
reboot生效
#再查看
ulimit -n

sed -i "s|# LimitNOFILE=65536|LimitNOFILE=65536|" /usr/lib/systemd/system/rabbitmq-server.service
sed -i "s|LimitNOFILE=32768|#LimitNOFILE=32768|" /usr/lib/systemd/system/rabbitmq-server.service

systemctl daemon-reload
systemctl restart rabbitmq-server

